<div class="container h-50 border-dark-subtle rounded-4 m-5 bg-secondary-subtle bg-gradient">
    <div class="row bg-dark-subtle rounded-top-4" style="height: 10%;">
        <div class="col-auto pb-3 ps-3 pe-3">
            <img id="img" class="flex-shrink-0 rounded-circle" src="{destinatarioAvatar}" width="75px" height="75px">
        </div>
        <div class="col-auto ms-3 py-2 align-content-center">
            <div class="row">
                <div class="col overflow-hidden">
                    <span>
                        <h5 class="mt-0 mb-1">{destinatario}</h5>
                        <h5 id="{destinatarioId}" class="mt-0 mb-1 text-muted">#{destinatarioId}</h5>
                    </span>

                </div>
            </div>
        </div>
    </div>
    <div class="row bg-body-secondary overflow-auto" style="height: 75%;">
        <div class="container-fluid py-2">
            <ul class="mb-0 list-group m-3 d-inline-block list-inline d-flex">
                {messaggi}
            </ul>
        </div>


    </div>

    <div class="row h-auto">
            <div class="form floating align-items-center d-flex pt-4">
                <div class="flex-column flex-fill pe-5" style="height: 100%;">
                    <textarea class="form-control" id="messaggio" style="resize: none;"></textarea>
                    <label for="floatingTextarea2" class="text-dark"></label>
                </div>
                <div class="flex-column">
                    <button class="btn btn-primary" onclick="
                        textarea = document.getElementById('messaggio');
                        messaggio = textarea.value;
                        console.log(messaggio);
                        destinatario = {destinatarioId};
                        conversazione = {conversazioneId};
                        mittente = {mittenteId};

                        formData = new FormData();
                        formData.append('mittente', mittente);
                        formData.append('destinatario',destinatario);
                        formData.append('conversazione', conversazione);
                        formData.append('messaggio', messaggio);
                        if(messaggio !='')
                        fetch('http://localhost:8080/bookexchange/api.php/message/send',{
                            method: 'POST',
                            body: formData,
                        })
                        .then(response => response.json())
                        .then(postResponse =>{
                            console.log(postResponse);
                            textarea.value = '';
                            location.reload();
                        })
                        ">
                        <i id="send-button">
                            invia
                        </i>
                    </button>
                </div>
            </div>
      
    </div>
</div>